:root
  --bg-surface: rgba(242, 242, 242, 1)
  --bg-surface-backdrop: rgba(224, 224, 224, 1)
  --bg-container: rgba(255, 255, 255, 1)
  --bg-button-tertiary: rgba(0, 0, 0, 0.06)
  --text-primary: rgba(0, 0, 0, 0.96)
  --text-secondary: rgba(0, 0, 0, 0.6)
  --icons-primary: rgba(0, 0, 0, 0.84)
  --icons-secondary: rgba(0, 0, 0, 0.6)
  --border-primary: rgba(0, 0, 0, 0.06)
  --t-container-fill--tertiary: rgba(0, 0, 0, 0.06)
  
  --motion-duration-standard-base: 150ms
  --motion-slowdown-factor: 1
  --motion-duration-standard: calc(var(--motion-duration-standard-base) * var(--motion-slowdown-factor))
  --motion-ease-standard: ease
  --motion-transition-standard: var(--motion-duration-standard) var(--motion-ease-standard)

@property --label-fade-width
  syntax: '<length>'
  inherits: true
  initial-value: 0px

@property --label-close-button-gap
  syntax: '<length>'
  inherits: true
  initial-value: 0px

*
  box-sizing: border-box

body
  margin: 0
  min-height: 100vh
  background: #1E1E1E

.motion--control
  position: fixed
  top: 20px
  left: 20px
  z-index: 9999
  display: flex
  flex-direction: column
  gap: 6px
  padding: 10px 12px
  border-radius: 10px
  background: rgba(30, 30, 30, 0.72)
  backdrop-filter: blur(6px)
  color: #f2f2f2
  font-family: "SF Pro Text", "SF Pro", "Segoe UI", sans-serif
  font-size: 12px
  line-height: 1.2

.motion--label
  font-weight: 510

.motion--row
  display: flex
  align-items: center
  gap: 10px

.motion--slider
  width: 180px
  accent-color: #f2f2f2

.motion--value
  width: 44px
  text-align: right
  font-variant-numeric: tabular-nums

.browser
  --panel-default-width: 800px
  --panel-default-height: 480px
  --panel-min-width: 120px
  --panel-min-height: 80px
  --tab-default-width: 244px
  --tab-min-width: 140px
  --window-drop-shadow: 0 20px 48px rgba(0, 0, 0, 0.2), 0 8px 20px rgba(0, 0, 0, 0.1)

  position: fixed
  left: calc(50vw - var(--panel-default-width) / 2)
  top: calc(50vh - var(--panel-default-height) / 2)
  width: var(--panel-default-width)
  height: var(--panel-default-height)
  min-width: var(--panel-min-width)
  min-height: var(--panel-min-height)
  border-radius: 16px
  background: var(--bg-surface-backdrop)
  box-shadow: var(--window-drop-shadow)
  padding-top: 4px
  contain: layout paint
  cursor: grab
  touch-action: none
  will-change: left, top, width, height

  .tab--row
    height: 40px
    display: flex
    flex-direction: row
    align-items: center
    padding: 0 14px;
    gap: 16px
    overflow: visible

  .window--controls
    flex: 0 0 auto
    display: flex
    align-items: center
    gap: 8px
    padding: 0

  .window--control
    display: block
    width: 12px
    height: 12px
    appearance: none
    border: 1px solid transparent
    border-radius: 999px
    padding: 0
    cursor: default
    transition: filter var(--motion-transition-standard), transform var(--motion-transition-standard)

  .window--control-close
    background: #FB5F5B
    border-color: #DD4745
    cursor: pointer

    &:hover
      filter: brightness(0.92)

    &:active
      transform: scale(0.94)

    &:focus-visible
      outline: 2px solid #00000033
      outline-offset: 2px

  .window--control-minimize
    background: #FDC03F
    border-color: #DFA032

  .window--control-expand
    background: #3CCC49
    border-color: #32AC34

  .bar
    height: 60px
    background: var(--bg-surface)
    border-top-left-radius: 16px
    border-top-right-radius: 16px

  .body
    height: 100%
    background: var(--bg-container)
    box-shadow: 0 0 0 1px var(--border-primary)


.tab--list
    display: flex
    align-items: flex-end
    flex: 1 1 auto
    min-width: 0

.tab--add
  flex: 0 0 32px
  align-self: center
  width: 32px
  height: 32px
  margin-left: 4px
  border: 0
  border-radius: 8px
  background: transparent
  padding: 0
  color: var(--icons-secondary)
  cursor: pointer
  position: relative
  transition: background-color var(--motion-transition-standard), color var(--motion-transition-standard)

  &::before
    content: ''
    position: absolute
    inset: 0
    background-color: currentColor
    -webkit-mask: url('/plus.svg') center / 15px 15px no-repeat
    mask: url('/plus.svg') center / 15px 15px no-repeat

  &:hover
    background: var(--t-container-fill--tertiary)
    color: var(--icons-primary)

  &:focus-visible
    outline: 2px solid #00000033
    outline-offset: -2px

.body--tab-dragging .tab--item:not(.tab--dragging):not(.tab--drag-source):not(.tab--drag-proxy):not(.tab--drag-hover-preview)
  pointer-events: none

.tab--item
  position: relative
  z-index: 0
  --label-close-button-gap: 0px
  --label-fade-width: 12px
  display: flex
  align-items: center
  gap: 8px
  flex: 0 1 var(--tab-default-width)
  min-width: var(--tab-min-width)
  max-width: var(--tab-default-width)
  height: 40px
  padding: 12px 14px
  border: 0
  border-radius: 12px
  background: transparent
  color: var(--text-secondary)
  font-family: "SF Pro Text", "SF Pro", "Segoe UI", sans-serif
  font-size: 13px
  line-height: 1
  font-feature-settings: "case" 1
  overflow: visible
  cursor: pointer
  transition: color var(--motion-transition-standard)

  &.tab--drag-source
    visibility: hidden
    pointer-events: none

  &.tab--drag-proxy
    position: fixed
    top: 0
    left: 0
    margin: 0
    pointer-events: none
    will-change: transform

  &.tab--dragging
    cursor: grabbing
    z-index: 100
    transition: none
    pointer-events: none

    &::before
      transition: none

    .tab--shape
      transition: none

    .tab--close
      transition: none

  &.tab--dragging-active
    color: var(--text-primary)
    --label-close-button-gap: 20px
    --label-fade-width: 40px

    .tab--shape
      opacity: 1
      transform: translateY(0) scale(1)
      border-radius: 12px

      &::before,
      &::after
        opacity: 0
        transform: translateY(4px)

    .tab--close
      opacity: 1
      pointer-events: auto

  &.tab--dragging-inactive
    color: var(--text-primary)
    --label-close-button-gap: 20px
    --label-fade-width: 40px

    &::before
      opacity: 1

    .tab--close
      opacity: 1
      pointer-events: auto

  &::before
    content: ''
    position: absolute
    top: 4px
    right: 4px
    bottom: 4px
    left: 4px
    border-radius: 8px
    opacity: 0
    background: var(--t-container-fill--tertiary)
    pointer-events: none
    z-index: 0
    transition: opacity var(--motion-transition-standard)

  .tab--shape
    position: absolute
    top: 0
    right: 0
    bottom: 0
    left: 0
    border-radius: 12px 12px 0 0
    background: var(--bg-surface)
    opacity: 0
    transform: translateY(8px) scale(0.92)
    transform-origin: center bottom
    pointer-events: none
    z-index: 0
    transition: opacity var(--motion-transition-standard), transform var(--motion-transition-standard)

    &::before,
    &::after
      content: ''
      position: absolute
      bottom: 0
      width: 12px
      height: 12px
      transform: translateY(4px)
      pointer-events: none
      transition: transform var(--motion-transition-standard)

    &::before
      left: -12px
      background: radial-gradient(circle at top left, transparent 12px, var(--bg-surface) 12px)

    &::after
      right: -12px
      background: radial-gradient(circle at top right, transparent 12px, var(--bg-surface) 12px)

  > :not(.tab--shape)
    position: relative
    z-index: 1

  &.tab--inactive:hover
    color: var(--text-primary)
    --label-close-button-gap: 20px
    --label-fade-width: 40px

    &::before
      opacity: 1

  &.tab--active
    z-index: 1
    color: var(--text-primary)
    --label-close-button-gap: 20px
    --label-fade-width: 40px

    .tab--shape
      opacity: 1
      transform: translateY(0) scale(1)

      &::before,
      &::after
        transform: translateY(0)

  &:focus-visible
    outline: 2px solid #00000033
    outline-offset: -2px

  .tab--favicon
    flex: 0 0 16px
    width: 16px
    height: 16px
    border-radius: 999px
    background: linear-gradient(180deg, #16a767 0%, #00754a 100%)
    color: #ffffff
    display: grid
    place-items: center
    font-size: 9px
    font-weight: 600
    letter-spacing: 0.01em
    user-select: none

  .tab--label
    flex: 1 1 auto
    min-width: 0
    padding-right: var(--label-close-button-gap)
    overflow: hidden
    text-overflow: clip
    white-space: nowrap
    -webkit-mask-image: linear-gradient(to right, #000 0, #000 calc(100% - var(--label-close-button-gap) - var(--label-fade-width)), transparent calc(100% - var(--label-close-button-gap)), transparent 100%)
    mask-image: linear-gradient(to right, #000 0, #000 calc(100% - var(--label-close-button-gap) - var(--label-fade-width)), transparent calc(100% - var(--label-close-button-gap)), transparent 100%)
    transition: padding-right var(--motion-transition-standard), --label-close-button-gap var(--motion-transition-standard), --label-fade-width var(--motion-transition-standard)
    user-select: none

  .tab--close
    position: absolute
    top: 50%
    right: 10px
    transform: translateY(-50%)
    width: 20px
    height: 20px
    border: 0
    border-radius: 4px
    background: transparent
    padding: 0
    color: var(--icons-secondary)
    opacity: 0
    pointer-events: none
    cursor: pointer
    transition: opacity var(--motion-transition-standard), color var(--motion-transition-standard), background-color var(--motion-transition-standard)

    &::before
      content: ''
      position: absolute
      inset: 0
      background-color: currentColor
      -webkit-mask: url('/x.svg') center / 7px 7px no-repeat
      mask: url('/x.svg') center / 7px 7px no-repeat

    &:hover
      background: var(--bg-button-tertiary)
      color: var(--icons-primary)

  &.tab--active .tab--close
    border-radius: 6px

  &.tab--active .tab--close,
  &.tab--inactive:hover .tab--close
    opacity: 1
    pointer-events: auto
